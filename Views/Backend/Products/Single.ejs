
<!DOCTYPE html>
<html lang="en">
<%- include('../../../Layouts/Backend/Header.ejs') %>
  <body>
    <!-- tap on top starts-->
    <div class="tap-top"><i data-feather="chevrons-up"></i></div>
    <!-- tap on tap ends-->
    <!-- Loader starts-->
    <div class="loader-wrapper">
      <div class="loader"></div>
    </div>
    <!-- Loader ends-->
    <!-- page-wrapper Start-->
    <div class="page-wrapper compact-wrapper" id="pageWrapper">
      <!-- Page Header Start-->
      <div class="page-header">
        <div class="header-wrapper row m-0">
          <form class="form-inline search-full col" action="#" method="get">
            <div class="form-group w-100">
              <div class="Typeahead Typeahead--twitterUsers">
                <div class="u-posRelative">
                  <input class="demo-input Typeahead-input form-control-plaintext w-100" type="text" placeholder="Search Koho .." name="q" title="" autofocus>
                  <div class="spinner-border Typeahead-spinner" role="status"><span class="sr-only">Loading...</span></div><i class="close-search" data-feather="x"></i>
                </div>
                <div class="Typeahead-menu"></div>
              </div>
            </div>
          </form>
          <div class="header-logo-wrapper col-auto p-0">
            <div class="logo-wrapper"><a href="index.html"><img class="img-fluid for-light" src="Backend/images/logo/logo.png" alt=""><img class="img-fluid for-dark" src="Backend/images/logo/logo-dark.png" alt=""></a></div>
            <div class="toggle-sidebar"><i class="status_toggle middle sidebar-toggle" data-feather="align-center"></i></div>
          </div>
          <div class="left-header col horizontal-wrapper ps-0">
          </div>
          <div class="nav-right col-6 pull-right right-header p-0">
            <ul class="nav-menus">   
              <li>
                <div class="mode"><i data-feather="moon"></i></div>
              </li>
              <li class="maximize"><a class="text-dark" href="#!" onclick="javascript:toggleFullScreen()"><i data-feather="maximize"></i></a></li>
              <li class="profile-nav onhover-dropdown p-0 me-0">
                <div class="d-flex profile-media"><img class="b-r-50" src="Backend/images/dashboard/profile.png" alt="">
                  <div class="flex-grow-1"><span><%= user.FullName %></span>
                    <p class="mb-0 font-roboto"><%= user.Role %> <i class="fa fa-angle-down"></i></p>
                  </div>
                </div>
                <ul class="profile-dropdown onhover-show-div">
                  <li><a href="/Logout"><i data-feather="log-in"> </i><span>Log out</span></a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Page Header Ends                              -->
      <!-- Page Body Start-->
      <div class="page-body-wrapper">
        <!-- Page Sidebar Start-->
        <!-- Page Sidebar Ends-->
        <div class="page-body">
          <div class="container-fluid">
            <div class="page-title">
              <div class="row">
                <div class="col-6">
                  <h3>General</h3>
                </div>
                <div class="col-6">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/Dashboard">                                       <i data-feather="home"></i></a></li>
                    <li class="breadcrumb-item">Dashboard</li>
                    <li class="breadcrumb-item active">Index</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
          <!-- Container-fluid starts-->
          <div class="container-fluid">
            <div>
              <div class="row product-page-main p-0">
                <div class="col-xl-5 col-md-6 box-col-7 xl-50">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-xl-9 product-main">
                          <div class="pro-slide-single">
                            <div><img class="img-fluid" src="Uploads/<%=product.ProductImage %>" alt="" id="mainImg"></div>
                          </div>
                        </div>
                        <div class="col-xl-3 product-thumbnail">
                          <div class="pro-slide-right">
                            <% if(product.ProductImages) { %>
                                <% product.ProductImages.map((prod)=>{ %>
                                    <div>
                                      <div class="slide-box">
                                        <img src="Uploads/<%=prod %>" alt="<%= prod %>" onclick="Enlarge('<%=prod %>')">
                                      </div>
                                    </div>
                                <% }) %>
                            <% }else{} %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-5 box-col-12 proorder-xl-3 xl-100">
                  <div class="card">
                    <div class="card-body">
                      <div class="pro-group pt-0 border-0">
                        <div class="product-page-details mt-0">
                          <h3><%= product.ProductName %></h3>
                        </div>
                        <div class="product-price">KES. <%= product.Price.toLocaleString('en') %>
                          <del>KES. <%= (product.Price * 110 / 100).toLocaleString('en')  %> </del>
                        </div>
                        <div class="color-selector">
                          <h4>Product Variants</h4>
                          <% product. ProductVariations.map((item)=>{ %>
                            <span class="bg-primary text-bold p-2"><%= item %></span>
                         <% }) %>
                        </div>
                      </div>
                      <div class="pro-group">
                        <p id="productDescription" data-bid="<%=product.ProductDescription%>">
                          </p>
                      </div>
                      <div class="pro-group">
                        <div class="row">
                          <div class="col-md-6">
                            <table>
                              <tbody>
                                <tr>
                                  <td> <b>Availability &nbsp;: &nbsp;</b></td>
                                  <td class="txt-success">In stock</td>
                                </tr>
                                <tr>
                                  <td> <b>Brand &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</b></td>
                                  <td><%= product.Brand %></td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <div class="col-md-6">
                            <table>
                              <tbody>
                                <tr>
                                  <td> <b>Seller &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;: &nbsp;&nbsp;&nbsp;</b></td>
                                  <td>Gitome Computers Garage</td>
                                </tr>
                                <tr>
                                  <td> <b>Category &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;: &nbsp;&nbsp;&nbsp;</b></td>
                                  <td><%= product.ProductCategory %>                                </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                      <div class="pro-group">
                        <div class="row">
                          <div class="col-md-4 xl-50 box-col-50">
                            <h4 class="product-title">share it</h4>
                          </div>
                          <div class="col-md-7 xl-50 box-col-50">
                            <div class="product-icon">
                              <span class="px-2">
                                <a href="https://facebook.com" _target="blank">
                                  <i data-feather="facebook" class="txt-primary"></i>
                                </a>
                              </span>
                              <span class="px-2">
                                <a href="https://facebook.com" _target="blank">
                                  <i data-feather="twitter" class="txt-primary"></i>
                                </a>
                              </span>
                              <span class="px-2">
                                <a href="https://facebook.com" _target="blank">
                                  <i data-feather="linkedin" class="txt-primary"></i>
                                </a>
                              </span>
                              <span class="px-2">
                                <a href="https://facebook.com" _target="blank">
                                  <i data-feather="instagram" class="txt-primary"></i>
                                </a>
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="pro-group pb-0">
                        <div class="pro-shop">
                        <a class="btn btn-warning mt-0" onclick="AddtoCart('<%= product.ProductName%>','Cart')">
                          <i data-feather="shopping-cart" class="me-2"></i>Add to Cart</a>
                         <a class="btn btn-primary" onclick="AddtoCart('<%= product.ProductName%>','Wish')">
                          <i data-feather="heart"></i>Add To WishList 
                         </a></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-2 col-md-6 box-col-5 xl-50 proorder-lg-1">
                  <div class="card">
                    <div class="card-body">
                      <div class="collection-filter-block">
                        <ul class="pro-services">
                          <li>
                            <div class="d-flex"><i data-feather="truck"></i>
                              <div class="flex-grow-1">
                                <h5>Free Shipping                                    </h5>
                                <p>Free Shipping World Wide</p>
                              </div>
                            </div>
                          </li>
                          <li>
                            <div class="d-flex"><i data-feather="clock"></i>
                              <div class="flex-grow-1">
                                <h5>24 X 7 Service                                    </h5>
                                <p>Online Service For New Customer                                 </p>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- silde-bar colleps block end here-->
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="row product-page-main">
                <div class="col-sm-12">
                  <ul class="nav nav-tabs border-tab mb-0" id="top-tab" role="tablist">
                    <li class="nav-item"><a class="nav-link active" 
                      id="top-home-tab" data-bs-toggle="tab" href="#top-home" role="tab" aria-controls="top-home" aria-selected="false">Product Details</a>
                      <div class="material-border"></div>
                    </li>
                  </ul>
                  <div class="tab-content" id="top-tabContent">
                    <div class="tab-pane fade active show" id="top-home" role="tabpanel" aria-labelledby="top-home-tab">
                      <p class="mb-0 m-t-20" id="fullDetails">
                       
                      </p>
      
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Container-fluid Ends-->
        </div>
        <!-- footer start-->
        <footer class="footer">
          <div class="container-fluid">
            <div class="row">
              <div class="col-10 p-0 footer-left">
                <p class="mb-0">&copy; <%= new Date().getFullYear() %> Gitome Computer Garage</p>
              </div>
              <div class="col-2 p-0 footer-right">     <i class="fa fa-heart font-danger">               </i></div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <%- include('../../../Layouts/Backend/Scripts.ejs') %>
    <script>
      const description = document.querySelector("p#productDescription")
      const dataDesc = description.getAttribute('data-bid')
      description.innerHTML =`${dataDesc.substring(0,20)}...`
     document.querySelector("p#fullDetails").innerHTML =`${dataDesc}`

     const Enlarge = id =>{
      document.querySelector("img#mainImg").setAttribute("src",`Uploads/${id}`)
     }
     const AddtoCart = async (item,Action)=>{
      const res = await fetch("/Add-To-Cart",{
        method:'POST',
        body:JSON.stringify({
          productName:item,
          action:Action
        }),
        headers:{
          'Content-Type':'application/json'
        }
      })
      const dataBack = await res.json()
      swal(dataBack.status, dataBack.message, dataBack.status);
     }
    </script>
  </body>
</html>